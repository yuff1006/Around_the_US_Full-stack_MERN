{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = \"https://register.nomoreparties.co\";\n    this._headers = headers;\n  }\n\n  initialize() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()]);\n  }\n\n  _handleFetchResponse(path) {\n    let methodUsed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"GET\";\n    let bodyContent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    return fetch(`${this._baseUrl}${path}`, {\n      method: methodUsed,\n      headers: this._headers,\n      body: bodyContent\n    }).then(res => {\n      if (res.ok) {\n        return res.json();\n      } else {\n        return Promise.reject(`Error: ${res.status}`);\n      }\n    });\n  }\n\n  getInitialCards() {\n    return this._handleFetchResponse(\"/cards\");\n  }\n\n  getUserInfo() {\n    return this._handleFetchResponse(\"/users/me\");\n  }\n\n  editUserProfile(inputValues) {\n    const bodyContent = JSON.stringify({\n      name: inputValues.name,\n      about: inputValues.about\n    });\n    return this._handleFetchResponse(\"/users/me\", \"PATCH\", bodyContent);\n  }\n\n  addNewCard(inputValues) {\n    const bodyContent = JSON.stringify({\n      name: inputValues.name,\n      link: inputValues.link\n    });\n    return this._handleFetchResponse(\"/cards\", \"POST\", bodyContent);\n  }\n\n  getCardLikeInfo() {\n    return this._handleFetchResponse(\"/cards\");\n  }\n\n  deleteCard(cardId) {\n    return this._handleFetchResponse(`/cards/${cardId}`, \"DELETE\");\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._handleFetchResponse(`/cards/likes/${cardId}`, \"DELETE\");\n    } else {\n      return this._handleFetchResponse(`/cards/likes/${cardId}`, \"PUT\");\n    }\n  }\n\n  editProfilePic(avatarLink) {\n    const bodyContent = JSON.stringify({\n      avatar: avatarLink.avatar\n    });\n    return this._handleFetchResponse(\"/users/me/avatar\", \"PATCH\", bodyContent);\n  }\n\n}\n\nexport const api = new Api({\n  baseUrl: \"https://register.nomoreparties.co\",\n  headers: {\n    authorization: \"1384428a-b01c-46ae-afda-f222b9d7dc7d\",\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport default Api;","map":{"version":3,"names":["Api","constructor","baseUrl","headers","_baseUrl","_headers","initialize","Promise","all","getUserInfo","getInitialCards","_handleFetchResponse","path","methodUsed","bodyContent","undefined","fetch","method","body","then","res","ok","json","reject","status","editUserProfile","inputValues","JSON","stringify","name","about","addNewCard","link","getCardLikeInfo","deleteCard","cardId","changeLikeCardStatus","isLiked","editProfilePic","avatarLink","avatar","api","authorization"],"sources":["/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = \"https://register.nomoreparties.co\";\n    this._headers = headers;\n  }\n  initialize() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()]);\n  }\n  _handleFetchResponse(path, methodUsed = \"GET\", bodyContent = undefined) {\n    return fetch(`${this._baseUrl}${path}`, {\n      method: methodUsed,\n      headers: this._headers,\n      body: bodyContent,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      } else {\n        return Promise.reject(`Error: ${res.status}`);\n      }\n    });\n  }\n  getInitialCards() {\n    return this._handleFetchResponse(\"/cards\");\n  }\n  getUserInfo() {\n    return this._handleFetchResponse(\"/users/me\");\n  }\n  editUserProfile(inputValues) {\n    const bodyContent = JSON.stringify({\n      name: inputValues.name,\n      about: inputValues.about,\n    });\n    return this._handleFetchResponse(\"/users/me\", \"PATCH\", bodyContent);\n  }\n  addNewCard(inputValues) {\n    const bodyContent = JSON.stringify({\n      name: inputValues.name,\n      link: inputValues.link,\n    });\n    return this._handleFetchResponse(\"/cards\", \"POST\", bodyContent);\n  }\n  getCardLikeInfo() {\n    return this._handleFetchResponse(\"/cards\");\n  }\n  deleteCard(cardId) {\n    return this._handleFetchResponse(`/cards/${cardId}`, \"DELETE\");\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._handleFetchResponse(`/cards/likes/${cardId}`, \"DELETE\");\n    } else {\n      return this._handleFetchResponse(`/cards/likes/${cardId}`, \"PUT\");\n    }\n  }\n  editProfilePic(avatarLink) {\n    const bodyContent = JSON.stringify({\n      avatar: avatarLink.avatar,\n    });\n    return this._handleFetchResponse(\"/users/me/avatar\", \"PATCH\", bodyContent);\n  }\n}\nexport const api = new Api({\n  baseUrl: \"https://register.nomoreparties.co\",\n  headers: {\n    authorization: \"1384428a-b01c-46ae-afda-f222b9d7dc7d\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default Api;\n"],"mappings":"AAAA,MAAMA,GAAN,CAAU;EACRC,WAAW,OAAuB;IAAA,IAAtB;MAAEC,OAAF;MAAWC;IAAX,CAAsB;IAChC,KAAKC,QAAL,GAAgB,mCAAhB;IACA,KAAKC,QAAL,GAAgBF,OAAhB;EACD;;EACDG,UAAU,GAAG;IACX,OAAOC,OAAO,CAACC,GAAR,CAAY,CAAC,KAAKC,WAAL,EAAD,EAAqB,KAAKC,eAAL,EAArB,CAAZ,CAAP;EACD;;EACDC,oBAAoB,CAACC,IAAD,EAAoD;IAAA,IAA7CC,UAA6C,uEAAhC,KAAgC;IAAA,IAAzBC,WAAyB,uEAAXC,SAAW;IACtE,OAAOC,KAAK,CAAE,GAAE,KAAKZ,QAAS,GAAEQ,IAAK,EAAzB,EAA4B;MACtCK,MAAM,EAAEJ,UAD8B;MAEtCV,OAAO,EAAE,KAAKE,QAFwB;MAGtCa,IAAI,EAAEJ;IAHgC,CAA5B,CAAL,CAIJK,IAJI,CAIEC,GAAD,IAAS;MACf,IAAIA,GAAG,CAACC,EAAR,EAAY;QACV,OAAOD,GAAG,CAACE,IAAJ,EAAP;MACD,CAFD,MAEO;QACL,OAAOf,OAAO,CAACgB,MAAR,CAAgB,UAASH,GAAG,CAACI,MAAO,EAApC,CAAP;MACD;IACF,CAVM,CAAP;EAWD;;EACDd,eAAe,GAAG;IAChB,OAAO,KAAKC,oBAAL,CAA0B,QAA1B,CAAP;EACD;;EACDF,WAAW,GAAG;IACZ,OAAO,KAAKE,oBAAL,CAA0B,WAA1B,CAAP;EACD;;EACDc,eAAe,CAACC,WAAD,EAAc;IAC3B,MAAMZ,WAAW,GAAGa,IAAI,CAACC,SAAL,CAAe;MACjCC,IAAI,EAAEH,WAAW,CAACG,IADe;MAEjCC,KAAK,EAAEJ,WAAW,CAACI;IAFc,CAAf,CAApB;IAIA,OAAO,KAAKnB,oBAAL,CAA0B,WAA1B,EAAuC,OAAvC,EAAgDG,WAAhD,CAAP;EACD;;EACDiB,UAAU,CAACL,WAAD,EAAc;IACtB,MAAMZ,WAAW,GAAGa,IAAI,CAACC,SAAL,CAAe;MACjCC,IAAI,EAAEH,WAAW,CAACG,IADe;MAEjCG,IAAI,EAAEN,WAAW,CAACM;IAFe,CAAf,CAApB;IAIA,OAAO,KAAKrB,oBAAL,CAA0B,QAA1B,EAAoC,MAApC,EAA4CG,WAA5C,CAAP;EACD;;EACDmB,eAAe,GAAG;IAChB,OAAO,KAAKtB,oBAAL,CAA0B,QAA1B,CAAP;EACD;;EACDuB,UAAU,CAACC,MAAD,EAAS;IACjB,OAAO,KAAKxB,oBAAL,CAA2B,UAASwB,MAAO,EAA3C,EAA8C,QAA9C,CAAP;EACD;;EACDC,oBAAoB,CAACD,MAAD,EAASE,OAAT,EAAkB;IACpC,IAAIA,OAAJ,EAAa;MACX,OAAO,KAAK1B,oBAAL,CAA2B,gBAAewB,MAAO,EAAjD,EAAoD,QAApD,CAAP;IACD,CAFD,MAEO;MACL,OAAO,KAAKxB,oBAAL,CAA2B,gBAAewB,MAAO,EAAjD,EAAoD,KAApD,CAAP;IACD;EACF;;EACDG,cAAc,CAACC,UAAD,EAAa;IACzB,MAAMzB,WAAW,GAAGa,IAAI,CAACC,SAAL,CAAe;MACjCY,MAAM,EAAED,UAAU,CAACC;IADc,CAAf,CAApB;IAGA,OAAO,KAAK7B,oBAAL,CAA0B,kBAA1B,EAA8C,OAA9C,EAAuDG,WAAvD,CAAP;EACD;;AA3DO;;AA6DV,OAAO,MAAM2B,GAAG,GAAG,IAAIzC,GAAJ,CAAQ;EACzBE,OAAO,EAAE,mCADgB;EAEzBC,OAAO,EAAE;IACPuC,aAAa,EAAE,sCADR;IAEP,gBAAgB;EAFT;AAFgB,CAAR,CAAZ;AAQP,eAAe1C,GAAf"},"metadata":{},"sourceType":"module"}