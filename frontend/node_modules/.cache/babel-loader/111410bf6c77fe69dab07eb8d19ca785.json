{"ast":null,"code":"import _slicedToArray from\"/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PopupWithForm from\"./PopupWithForm\";import{useState,useContext,useRef,useEffect}from\"react\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var _avatarRef$current;var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateAvatar=_ref.onUpdateAvatar,buttonState=_ref.buttonState;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),avatar=_useState2[0],setAvatar=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isAvatarValid=_useState4[0],setAvatarValid=_useState4[1];var currentUser=useContext(CurrentUserContext);var avatarRef=useRef(avatar);useEffect(function(){var _currentUser$avatar;setAvatar((_currentUser$avatar=currentUser.avatar)!==null&&_currentUser$avatar!==void 0?_currentUser$avatar:\"\");},[currentUser]);function handleAvatarChange(e){setAvatar(e.target.value);if(e.target.checkValidity()){setAvatarValid(true);}else{setAvatarValid(false);}}function handleSubmit(e){e.preventDefault();onUpdateAvatar({avatar:avatarRef.current.value});}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"avatar\",title:\"Change Profile Picture\",isOpen:isOpen,onClose:onClose,buttonText:buttonState===false?\"Save\":\"Saving...\",onSubmit:handleSubmit,buttonState:buttonState,children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__info \".concat(isAvatarValid?\"\":\"popup__info_type_error\"),id:\"popup-profile-pic-url\",placeholder:\"https://somewebsite.com/someimage.jpg\",required:true,type:\"url\",name:\"avatar\",onChange:handleAvatarChange,value:avatar,ref:avatarRef}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error \".concat(isAvatarValid?\"\":\"popup__error_visible\"),id:\"popup-profile-pic-url-error\",children:(_avatarRef$current=avatarRef.current)===null||_avatarRef$current===void 0?void 0:_avatarRef$current.validationMessage})]});}export default EditAvatarPopup;","map":{"version":3,"names":["PopupWithForm","useState","useContext","useRef","useEffect","CurrentUserContext","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","buttonState","avatar","setAvatar","isAvatarValid","setAvatarValid","currentUser","avatarRef","handleAvatarChange","e","target","value","checkValidity","handleSubmit","preventDefault","current","validationMessage"],"sources":["/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/components/EditAvatarPopup.js"],"sourcesContent":["import PopupWithForm from \"./PopupWithForm\";\nimport { useState, useContext, useRef, useEffect } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, buttonState }) {\n  const [avatar, setAvatar] = useState(\"\");\n  const [isAvatarValid, setAvatarValid] = useState(true);\n  const currentUser = useContext(CurrentUserContext);\n  const avatarRef = useRef(avatar);\n\n  useEffect(() => {\n    setAvatar(currentUser.avatar ?? \"\");\n  }, [currentUser]);\n\n  function handleAvatarChange(e) {\n    setAvatar(e.target.value);\n    if (e.target.checkValidity()) {\n      setAvatarValid(true);\n    } else {\n      setAvatarValid(false);\n    }\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Change Profile Picture\"\n      isOpen={isOpen}\n      onClose={onClose}\n      buttonText={buttonState === false ? \"Save\" : \"Saving...\"}\n      onSubmit={handleSubmit}\n      buttonState={buttonState}\n    >\n      <input\n        className={`popup__info ${\n          isAvatarValid ? \"\" : \"popup__info_type_error\"\n        }`}\n        id=\"popup-profile-pic-url\"\n        placeholder=\"https://somewebsite.com/someimage.jpg\"\n        required\n        type=\"url\"\n        name=\"avatar\"\n        onChange={handleAvatarChange}\n        value={avatar}\n        ref={avatarRef}\n      />\n      <span\n        className={`popup__error ${\n          isAvatarValid ? \"\" : \"popup__error_visible\"\n        }`}\n        id=\"popup-profile-pic-url-error\"\n      >\n        {avatarRef.current?.validationMessage}\n      </span>\n    </PopupWithForm>\n  );\n}\nexport default EditAvatarPopup;\n"],"mappings":"kJAAA,MAAOA,cAAP,KAA0B,iBAA1B,CACA,OAASC,QAAT,CAAmBC,UAAnB,CAA+BC,MAA/B,CAAuCC,SAAvC,KAAwD,OAAxD,CACA,OAASC,kBAAT,KAAmC,gCAAnC,C,wFAEA,QAASC,gBAAT,MAA2E,2BAAhDC,OAAgD,MAAhDA,MAAgD,CAAxCC,OAAwC,MAAxCA,OAAwC,CAA/BC,cAA+B,MAA/BA,cAA+B,CAAfC,WAAe,MAAfA,WAAe,CACzE,cAA4BT,QAAQ,CAAC,EAAD,CAApC,wCAAOU,MAAP,eAAeC,SAAf,eACA,eAAwCX,QAAQ,CAAC,IAAD,CAAhD,yCAAOY,aAAP,eAAsBC,cAAtB,eACA,GAAMC,YAAW,CAAGb,UAAU,CAACG,kBAAD,CAA9B,CACA,GAAMW,UAAS,CAAGb,MAAM,CAACQ,MAAD,CAAxB,CAEAP,SAAS,CAAC,UAAM,yBACdQ,SAAS,sBAACG,WAAW,CAACJ,MAAb,2DAAuB,EAAvB,CAAT,CACD,CAFQ,CAEN,CAACI,WAAD,CAFM,CAAT,CAIA,QAASE,mBAAT,CAA4BC,CAA5B,CAA+B,CAC7BN,SAAS,CAACM,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT,CACA,GAAIF,CAAC,CAACC,MAAF,CAASE,aAAT,EAAJ,CAA8B,CAC5BP,cAAc,CAAC,IAAD,CAAd,CACD,CAFD,IAEO,CACLA,cAAc,CAAC,KAAD,CAAd,CACD,CACF,CACD,QAASQ,aAAT,CAAsBJ,CAAtB,CAAyB,CACvBA,CAAC,CAACK,cAAF,GACAd,cAAc,CAAC,CACbE,MAAM,CAAEK,SAAS,CAACQ,OAAV,CAAkBJ,KADb,CAAD,CAAd,CAGD,CACD,mBACE,MAAC,aAAD,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,wBAFR,CAGE,MAAM,CAAEb,MAHV,CAIE,OAAO,CAAEC,OAJX,CAKE,UAAU,CAAEE,WAAW,GAAK,KAAhB,CAAwB,MAAxB,CAAiC,WAL/C,CAME,QAAQ,CAAEY,YANZ,CAOE,WAAW,CAAEZ,WAPf,wBASE,cACE,SAAS,uBACPG,aAAa,CAAG,EAAH,CAAQ,wBADd,CADX,CAIE,EAAE,CAAC,uBAJL,CAKE,WAAW,CAAC,uCALd,CAME,QAAQ,KANV,CAOE,IAAI,CAAC,KAPP,CAQE,IAAI,CAAC,QARP,CASE,QAAQ,CAAEI,kBATZ,CAUE,KAAK,CAAEN,MAVT,CAWE,GAAG,CAAEK,SAXP,EATF,cAsBE,aACE,SAAS,wBACPH,aAAa,CAAG,EAAH,CAAQ,sBADd,CADX,CAIE,EAAE,CAAC,6BAJL,8BAMGG,SAAS,CAACQ,OANb,6CAMG,mBAAmBC,iBANtB,EAtBF,GADF,CAiCD,CACD,cAAenB,gBAAf"},"metadata":{},"sourceType":"module"}