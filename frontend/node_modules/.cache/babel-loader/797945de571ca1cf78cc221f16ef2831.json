{"ast":null,"code":"var _jsxFileName = \"/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/components/EditAvatarPopup.js\",\n    _s = $RefreshSig$();\n\nimport PopupWithForm from \"./PopupWithForm\";\nimport { useState, useContext, useRef, useEffect } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditAvatarPopup(_ref) {\n  _s();\n\n  let {\n    isOpen,\n    onClose,\n    onUpdateAvatar,\n    buttonState\n  } = _ref;\n  const [isAvatarValid, setAvatarValid] = useState(true);\n  const currentUser = useContext(CurrentUserContext);\n  const avatarRef = useRef(\"\");\n  const [validationMessage, setValidationMessage] = useState(\"\");\n  useEffect(() => {\n    avatarRef.current.value = currentUser.avatar; // setAvatarValid(true);\n  }, [isOpen, currentUser]);\n\n  function checkAvatarInputValidity(event) {\n    setAvatarValid(event.target.validity);\n    setValidationMessage(avatarRef.current.validationMessage);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(PopupWithForm, {\n    name: \"avatar\",\n    title: \"Change Profile Picture\",\n    isOpen: isOpen,\n    onClose: onClose,\n    buttonText: buttonState === false ? \"Save\" : \"Saving...\",\n    onSubmit: handleSubmit,\n    buttonState: buttonState,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      className: `popup__info ${isAvatarValid ? \"\" : \"popup__info_type_error\"}`,\n      id: \"popup-profile-pic-url\",\n      placeholder: \"https://somewebsite.com/someimage.jpg\",\n      required: true,\n      type: \"url\",\n      name: \"avatar\",\n      onChange: checkAvatarInputValidity,\n      ref: avatarRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `popup__error ${isAvatarValid ? \"\" : \"popup__error_visible\"}`,\n      id: \"popup-profile-pic-url-error\",\n      children: validationMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditAvatarPopup, \"bSFyWfVOVzP2jATXkgsZGI7RLMc=\");\n\n_c = EditAvatarPopup;\nexport default EditAvatarPopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditAvatarPopup\");","map":{"version":3,"names":["PopupWithForm","useState","useContext","useRef","useEffect","CurrentUserContext","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","buttonState","isAvatarValid","setAvatarValid","currentUser","avatarRef","validationMessage","setValidationMessage","current","value","avatar","checkAvatarInputValidity","event","target","validity","handleSubmit","e","preventDefault"],"sources":["/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/components/EditAvatarPopup.js"],"sourcesContent":["import PopupWithForm from \"./PopupWithForm\";\nimport { useState, useContext, useRef, useEffect } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, buttonState }) {\n  const [isAvatarValid, setAvatarValid] = useState(true);\n  const currentUser = useContext(CurrentUserContext);\n  const avatarRef = useRef(\"\");\n  const [validationMessage, setValidationMessage] = useState(\"\");\n\n  useEffect(() => {\n    avatarRef.current.value = currentUser.avatar;\n    // setAvatarValid(true);\n  }, [isOpen, currentUser]);\n\n  function checkAvatarInputValidity(event) {\n    setAvatarValid(event.target.validity);\n    setValidationMessage(avatarRef.current.validationMessage);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Change Profile Picture\"\n      isOpen={isOpen}\n      onClose={onClose}\n      buttonText={buttonState === false ? \"Save\" : \"Saving...\"}\n      onSubmit={handleSubmit}\n      buttonState={buttonState}\n    >\n      <input\n        className={`popup__info ${\n          isAvatarValid ? \"\" : \"popup__info_type_error\"\n        }`}\n        id=\"popup-profile-pic-url\"\n        placeholder=\"https://somewebsite.com/someimage.jpg\"\n        required\n        type=\"url\"\n        name=\"avatar\"\n        onChange={checkAvatarInputValidity}\n        ref={avatarRef}\n      />\n      <span\n        className={`popup__error ${\n          isAvatarValid ? \"\" : \"popup__error_visible\"\n        }`}\n        id=\"popup-profile-pic-url-error\"\n      >\n        {validationMessage}\n      </span>\n    </PopupWithForm>\n  );\n}\nexport default EditAvatarPopup;\n"],"mappings":";;;AAAA,OAAOA,aAAP,MAA0B,iBAA1B;AACA,SAASC,QAAT,EAAmBC,UAAnB,EAA+BC,MAA/B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,SAASC,kBAAT,QAAmC,gCAAnC;;;AAEA,SAASC,eAAT,OAA2E;EAAA;;EAAA,IAAlD;IAAEC,MAAF;IAAUC,OAAV;IAAmBC,cAAnB;IAAmCC;EAAnC,CAAkD;EACzE,MAAM,CAACC,aAAD,EAAgBC,cAAhB,IAAkCX,QAAQ,CAAC,IAAD,CAAhD;EACA,MAAMY,WAAW,GAAGX,UAAU,CAACG,kBAAD,CAA9B;EACA,MAAMS,SAAS,GAAGX,MAAM,CAAC,EAAD,CAAxB;EACA,MAAM,CAACY,iBAAD,EAAoBC,oBAApB,IAA4Cf,QAAQ,CAAC,EAAD,CAA1D;EAEAG,SAAS,CAAC,MAAM;IACdU,SAAS,CAACG,OAAV,CAAkBC,KAAlB,GAA0BL,WAAW,CAACM,MAAtC,CADc,CAEd;EACD,CAHQ,EAGN,CAACZ,MAAD,EAASM,WAAT,CAHM,CAAT;;EAKA,SAASO,wBAAT,CAAkCC,KAAlC,EAAyC;IACvCT,cAAc,CAACS,KAAK,CAACC,MAAN,CAAaC,QAAd,CAAd;IACAP,oBAAoB,CAACF,SAAS,CAACG,OAAV,CAAkBF,iBAAnB,CAApB;EACD;;EACD,SAASS,YAAT,CAAsBC,CAAtB,EAAyB;IACvBA,CAAC,CAACC,cAAF;IACAjB,cAAc,CAAC;MACbU,MAAM,EAAEL,SAAS,CAACG,OAAV,CAAkBC;IADb,CAAD,CAAd;EAGD;;EACD,oBACE,QAAC,aAAD;IACE,IAAI,EAAC,QADP;IAEE,KAAK,EAAC,wBAFR;IAGE,MAAM,EAAEX,MAHV;IAIE,OAAO,EAAEC,OAJX;IAKE,UAAU,EAAEE,WAAW,KAAK,KAAhB,GAAwB,MAAxB,GAAiC,WAL/C;IAME,QAAQ,EAAEc,YANZ;IAOE,WAAW,EAAEd,WAPf;IAAA,wBASE;MACE,SAAS,EAAG,eACVC,aAAa,GAAG,EAAH,GAAQ,wBACtB,EAHH;MAIE,EAAE,EAAC,uBAJL;MAKE,WAAW,EAAC,uCALd;MAME,QAAQ,MANV;MAOE,IAAI,EAAC,KAPP;MAQE,IAAI,EAAC,QARP;MASE,QAAQ,EAAES,wBATZ;MAUE,GAAG,EAAEN;IAVP;MAAA;MAAA;MAAA;IAAA,QATF,eAqBE;MACE,SAAS,EAAG,gBACVH,aAAa,GAAG,EAAH,GAAQ,sBACtB,EAHH;MAIE,EAAE,EAAC,6BAJL;MAAA,UAMGI;IANH;MAAA;MAAA;MAAA;IAAA,QArBF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAgCD;;GArDQT,e;;KAAAA,e;AAsDT,eAAeA,eAAf"},"metadata":{},"sourceType":"module"}