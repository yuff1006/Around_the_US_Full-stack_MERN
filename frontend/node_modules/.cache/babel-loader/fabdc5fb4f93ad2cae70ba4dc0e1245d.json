{"ast":null,"code":"import _slicedToArray from\"/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PopupWithForm from\"./PopupWithForm\";import{useState,useContext,useEffect,useRef}from\"react\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var _nameInputRef$current,_aboutInputRef$curren;var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,buttonState=_ref.buttonState;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isNameValid=_useState6[0],setNameValid=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isAboutValid=_useState8[0],setAboutValid=_useState8[1];var currentUser=useContext(CurrentUserContext);var nameInputRef=useRef();var aboutInputRef=useRef();useEffect(function(){var _currentUser$name,_currentUser$about;setName((_currentUser$name=currentUser.name)!==null&&_currentUser$name!==void 0?_currentUser$name:\"\");setDescription((_currentUser$about=currentUser.about)!==null&&_currentUser$about!==void 0?_currentUser$about:\"\");},[currentUser]);function handleNameChange(e){setName(e.target.value);if(e.target.checkValidity()){setNameValid(true);}else{setNameValid(false);}}function handleDescriptionChange(e){setDescription(e.target.value);if(e.target.checkValidity()){setAboutValid(true);}else{setAboutValid(false);}}function handleSubmit(e){e.preventDefault();onUpdateUser({name:name,about:description});}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"profile\",title:\"Edit Profile\",isOpen:isOpen,onClose:onClose,buttonText:buttonState===false?\"Save\":\"Saving...\",onSubmit:handleSubmit,buttonState:buttonState,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__info \".concat(isNameValid?\"\":\"popup__info_type_error\"),id:\"popup-name\",required:true,minLength:\"2\",maxLength:\"40\",name:\"name\",value:name,onChange:handleNameChange,ref:nameInputRef}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error \".concat(isNameValid?\"\":\"popup__error_visible\"),id:\"popup-name-error\",children:(_nameInputRef$current=nameInputRef.current)===null||_nameInputRef$current===void 0?void 0:_nameInputRef$current.validationMessage}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__info \".concat(isAboutValid?\"\":\"popup__info_type_error\"),id:\"popup-title\",required:true,minLength:\"2\",maxLength:\"200\",name:\"about\",value:description,onChange:handleDescriptionChange,ref:aboutInputRef}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error \".concat(isAboutValid?\"\":\"popup__error_visible\"),id:\"popup-title-error\",children:(_aboutInputRef$curren=aboutInputRef.current)===null||_aboutInputRef$curren===void 0?void 0:_aboutInputRef$curren.validationMessage})]});}export default EditProfilePopup;","map":{"version":3,"names":["PopupWithForm","useState","useContext","useEffect","useRef","CurrentUserContext","EditProfilePopup","isOpen","onClose","onUpdateUser","buttonState","name","setName","description","setDescription","isNameValid","setNameValid","isAboutValid","setAboutValid","currentUser","nameInputRef","aboutInputRef","about","handleNameChange","e","target","value","checkValidity","handleDescriptionChange","handleSubmit","preventDefault","current","validationMessage"],"sources":["/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/components/EditProfilePopup.js"],"sourcesContent":["import PopupWithForm from \"./PopupWithForm\";\nimport { useState, useContext, useEffect, useRef } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, buttonState }) {\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [isNameValid, setNameValid] = useState(true);\n  const [isAboutValid, setAboutValid] = useState(true);\n  const currentUser = useContext(CurrentUserContext);\n  const nameInputRef = useRef();\n  const aboutInputRef = useRef();\n\n  useEffect(() => {\n    setName(currentUser.name ?? \"\");\n    setDescription(currentUser.about ?? \"\");\n  }, [currentUser]);\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n    if (e.target.checkValidity()) {\n      setNameValid(true);\n    } else {\n      setNameValid(false);\n    }\n  }\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value);\n    if (e.target.checkValidity()) {\n      setAboutValid(true);\n    } else {\n      setAboutValid(false);\n    }\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"profile\"\n      title=\"Edit Profile\"\n      isOpen={isOpen}\n      onClose={onClose}\n      buttonText={buttonState === false ? \"Save\" : \"Saving...\"}\n      onSubmit={handleSubmit}\n      buttonState={buttonState}\n    >\n      <input\n        type=\"text\"\n        className={`popup__info ${isNameValid ? \"\" : \"popup__info_type_error\"}`}\n        id=\"popup-name\"\n        required\n        minLength=\"2\"\n        maxLength=\"40\"\n        name=\"name\"\n        value={name}\n        onChange={handleNameChange}\n        ref={nameInputRef}\n      />\n      <span\n        className={`popup__error ${isNameValid ? \"\" : \"popup__error_visible\"}`}\n        id=\"popup-name-error\"\n      >\n        {nameInputRef.current?.validationMessage}\n      </span>\n      <input\n        type=\"text\"\n        className={`popup__info ${\n          isAboutValid ? \"\" : \"popup__info_type_error\"\n        }`}\n        id=\"popup-title\"\n        required\n        minLength=\"2\"\n        maxLength=\"200\"\n        name=\"about\"\n        value={description}\n        onChange={handleDescriptionChange}\n        ref={aboutInputRef}\n      />\n      <span\n        className={`popup__error ${isAboutValid ? \"\" : \"popup__error_visible\"}`}\n        id=\"popup-title-error\"\n      >\n        {aboutInputRef.current?.validationMessage}\n      </span>\n    </PopupWithForm>\n  );\n}\nexport default EditProfilePopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}