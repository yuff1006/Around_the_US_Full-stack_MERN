{"ast":null,"code":"var _jsxFileName = \"/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/components/EditAvatarPopup.js\",\n    _s = $RefreshSig$();\n\nimport PopupWithForm from \"./PopupWithForm\";\nimport { useState, useContext, useRef, useEffect } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditAvatarPopup(_ref) {\n  _s();\n\n  var _avatarRef$current;\n\n  let {\n    isOpen,\n    onClose,\n    onUpdateAvatar,\n    buttonState\n  } = _ref;\n  const [avatar, setAvatar] = useState(\"\");\n  const [isAvatarValid, setAvatarValid] = useState(true);\n  const currentUser = useContext(CurrentUserContext);\n  const avatarRef = useRef(\"\");\n  useEffect(() => {\n    var _currentUser$avatar;\n\n    setAvatar((_currentUser$avatar = currentUser.avatar) !== null && _currentUser$avatar !== void 0 ? _currentUser$avatar : \"\");\n  }, [currentUser]);\n\n  function handleAvatarChange(e) {\n    setAvatar(e.target.value);\n\n    if (e.target.checkValidity()) {\n      setAvatarValid(true);\n    } else {\n      setAvatarValid(false);\n    }\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(PopupWithForm, {\n    name: \"avatar\",\n    title: \"Change Profile Picture\",\n    isOpen: isOpen,\n    onClose: onClose,\n    buttonText: buttonState === false ? \"Save\" : \"Saving...\",\n    onSubmit: handleSubmit,\n    buttonState: buttonState,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      className: `popup__info ${isAvatarValid ? \"\" : \"popup__info_type_error\"}`,\n      id: \"popup-profile-pic-url\",\n      placeholder: \"https://somewebsite.com/someimage.jpg\",\n      required: true,\n      type: \"url\",\n      name: \"avatar\",\n      onChange: handleAvatarChange,\n      value: avatar,\n      ref: avatarRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `popup__error ${isAvatarValid ? \"\" : \"popup__error_visible\"}`,\n      id: \"popup-profile-pic-url-error\",\n      children: (_avatarRef$current = avatarRef.current) === null || _avatarRef$current === void 0 ? void 0 : _avatarRef$current.validationMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditAvatarPopup, \"E7Ml94ya1+dil2fxICBt4AgX8+M=\");\n\n_c = EditAvatarPopup;\nexport default EditAvatarPopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditAvatarPopup\");","map":{"version":3,"names":["PopupWithForm","useState","useContext","useRef","useEffect","CurrentUserContext","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","buttonState","avatar","setAvatar","isAvatarValid","setAvatarValid","currentUser","avatarRef","handleAvatarChange","e","target","value","checkValidity","handleSubmit","preventDefault","current","validationMessage"],"sources":["/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/components/EditAvatarPopup.js"],"sourcesContent":["import PopupWithForm from \"./PopupWithForm\";\nimport { useState, useContext, useRef, useEffect } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, buttonState }) {\n  const [avatar, setAvatar] = useState(\"\");\n  const [isAvatarValid, setAvatarValid] = useState(true);\n  const currentUser = useContext(CurrentUserContext);\n  const avatarRef = useRef(\"\");\n\n  useEffect(() => {\n    setAvatar(currentUser.avatar ?? \"\");\n  }, [currentUser]);\n\n  function handleAvatarChange(e) {\n    setAvatar(e.target.value);\n    if (e.target.checkValidity()) {\n      setAvatarValid(true);\n    } else {\n      setAvatarValid(false);\n    }\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Change Profile Picture\"\n      isOpen={isOpen}\n      onClose={onClose}\n      buttonText={buttonState === false ? \"Save\" : \"Saving...\"}\n      onSubmit={handleSubmit}\n      buttonState={buttonState}\n    >\n      <input\n        className={`popup__info ${\n          isAvatarValid ? \"\" : \"popup__info_type_error\"\n        }`}\n        id=\"popup-profile-pic-url\"\n        placeholder=\"https://somewebsite.com/someimage.jpg\"\n        required\n        type=\"url\"\n        name=\"avatar\"\n        onChange={handleAvatarChange}\n        value={avatar}\n        ref={avatarRef}\n      />\n      <span\n        className={`popup__error ${\n          isAvatarValid ? \"\" : \"popup__error_visible\"\n        }`}\n        id=\"popup-profile-pic-url-error\"\n      >\n        {avatarRef.current?.validationMessage}\n      </span>\n    </PopupWithForm>\n  );\n}\nexport default EditAvatarPopup;\n"],"mappings":";;;AAAA,OAAOA,aAAP,MAA0B,iBAA1B;AACA,SAASC,QAAT,EAAmBC,UAAnB,EAA+BC,MAA/B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,SAASC,kBAAT,QAAmC,gCAAnC;;;AAEA,SAASC,eAAT,OAA2E;EAAA;;EAAA;;EAAA,IAAlD;IAAEC,MAAF;IAAUC,OAAV;IAAmBC,cAAnB;IAAmCC;EAAnC,CAAkD;EACzE,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,EAAD,CAApC;EACA,MAAM,CAACY,aAAD,EAAgBC,cAAhB,IAAkCb,QAAQ,CAAC,IAAD,CAAhD;EACA,MAAMc,WAAW,GAAGb,UAAU,CAACG,kBAAD,CAA9B;EACA,MAAMW,SAAS,GAAGb,MAAM,CAAC,EAAD,CAAxB;EAEAC,SAAS,CAAC,MAAM;IAAA;;IACdQ,SAAS,wBAACG,WAAW,CAACJ,MAAb,qEAAuB,EAAvB,CAAT;EACD,CAFQ,EAEN,CAACI,WAAD,CAFM,CAAT;;EAIA,SAASE,kBAAT,CAA4BC,CAA5B,EAA+B;IAC7BN,SAAS,CAACM,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT;;IACA,IAAIF,CAAC,CAACC,MAAF,CAASE,aAAT,EAAJ,EAA8B;MAC5BP,cAAc,CAAC,IAAD,CAAd;IACD,CAFD,MAEO;MACLA,cAAc,CAAC,KAAD,CAAd;IACD;EACF;;EACD,SAASQ,YAAT,CAAsBJ,CAAtB,EAAyB;IACvBA,CAAC,CAACK,cAAF;IACAd,cAAc,CAAC;MACbE,MAAM,EAAEK,SAAS,CAACQ,OAAV,CAAkBJ;IADb,CAAD,CAAd;EAGD;;EACD,oBACE,QAAC,aAAD;IACE,IAAI,EAAC,QADP;IAEE,KAAK,EAAC,wBAFR;IAGE,MAAM,EAAEb,MAHV;IAIE,OAAO,EAAEC,OAJX;IAKE,UAAU,EAAEE,WAAW,KAAK,KAAhB,GAAwB,MAAxB,GAAiC,WAL/C;IAME,QAAQ,EAAEY,YANZ;IAOE,WAAW,EAAEZ,WAPf;IAAA,wBASE;MACE,SAAS,EAAG,eACVG,aAAa,GAAG,EAAH,GAAQ,wBACtB,EAHH;MAIE,EAAE,EAAC,uBAJL;MAKE,WAAW,EAAC,uCALd;MAME,QAAQ,MANV;MAOE,IAAI,EAAC,KAPP;MAQE,IAAI,EAAC,QARP;MASE,QAAQ,EAAEI,kBATZ;MAUE,KAAK,EAAEN,MAVT;MAWE,GAAG,EAAEK;IAXP;MAAA;MAAA;MAAA;IAAA,QATF,eAsBE;MACE,SAAS,EAAG,gBACVH,aAAa,GAAG,EAAH,GAAQ,sBACtB,EAHH;MAIE,EAAE,EAAC,6BAJL;MAAA,gCAMGG,SAAS,CAACQ,OANb,uDAMG,mBAAmBC;IANtB;MAAA;MAAA;MAAA;IAAA,QAtBF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAiCD;;GAzDQnB,e;;KAAAA,e;AA0DT,eAAeA,eAAf"},"metadata":{},"sourceType":"module"}