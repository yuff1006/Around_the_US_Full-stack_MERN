{"ast":null,"code":"import _slicedToArray from\"/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PopupWithForm from\"./PopupWithForm\";import{useState,useContext,useRef,useEffect}from\"react\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateAvatar=_ref.onUpdateAvatar,buttonState=_ref.buttonState;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isAvatarValid=_useState2[0],setAvatarValid=_useState2[1];var currentUser=useContext(CurrentUserContext);var avatarRef=useRef(\"\");var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),validationMessage=_useState4[0],setValidationMessage=_useState4[1];useEffect(function(){avatarRef.current.value=currentUser.avatar;setAvatarValid(true);},[isOpen,currentUser]);function checkAvatarInputValidity(event){setAvatarValid(event.target.validity.valid);setValidationMessage(avatarRef.current.validationMessage);}function handleSubmit(e){e.preventDefault();onUpdateAvatar({avatar:avatarRef.current.value});}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"avatar\",title:\"Change Profile Picture\",isOpen:isOpen,onClose:onClose,buttonText:buttonState===false?\"Save\":\"Saving...\",onSubmit:handleSubmit,buttonState:buttonState,children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__info \".concat(isAvatarValid?\"\":\"popup__info_type_error\"),id:\"popup-profile-pic-url\",placeholder:\"https://somewebsite.com/someimage.jpg\",required:true,type:\"url\",name:\"avatar\",onChange:checkAvatarInputValidity,ref:avatarRef}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error \".concat(isAvatarValid?\"\":\"popup__error_visible\"),id:\"popup-profile-pic-url-error\",children:validationMessage})]});}export default EditAvatarPopup;","map":{"version":3,"names":["PopupWithForm","useState","useContext","useRef","useEffect","CurrentUserContext","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","buttonState","isAvatarValid","setAvatarValid","currentUser","avatarRef","validationMessage","setValidationMessage","current","value","avatar","checkAvatarInputValidity","event","target","validity","valid","handleSubmit","e","preventDefault"],"sources":["/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/components/EditAvatarPopup.js"],"sourcesContent":["import PopupWithForm from \"./PopupWithForm\";\nimport { useState, useContext, useRef, useEffect } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, buttonState }) {\n  const [isAvatarValid, setAvatarValid] = useState(true);\n  const currentUser = useContext(CurrentUserContext);\n  const avatarRef = useRef(\"\");\n  const [validationMessage, setValidationMessage] = useState(\"\");\n\n  useEffect(() => {\n    avatarRef.current.value = currentUser.avatar;\n    setAvatarValid(true);\n  }, [isOpen, currentUser]);\n\n  function checkAvatarInputValidity(event) {\n    setAvatarValid(event.target.validity.valid);\n    setValidationMessage(avatarRef.current.validationMessage);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Change Profile Picture\"\n      isOpen={isOpen}\n      onClose={onClose}\n      buttonText={buttonState === false ? \"Save\" : \"Saving...\"}\n      onSubmit={handleSubmit}\n      buttonState={buttonState}\n    >\n      <input\n        className={`popup__info ${\n          isAvatarValid ? \"\" : \"popup__info_type_error\"\n        }`}\n        id=\"popup-profile-pic-url\"\n        placeholder=\"https://somewebsite.com/someimage.jpg\"\n        required\n        type=\"url\"\n        name=\"avatar\"\n        onChange={checkAvatarInputValidity}\n        ref={avatarRef}\n      />\n      <span\n        className={`popup__error ${\n          isAvatarValid ? \"\" : \"popup__error_visible\"\n        }`}\n        id=\"popup-profile-pic-url-error\"\n      >\n        {validationMessage}\n      </span>\n    </PopupWithForm>\n  );\n}\nexport default EditAvatarPopup;\n"],"mappings":"kJAAA,MAAOA,cAAP,KAA0B,iBAA1B,CACA,OAASC,QAAT,CAAmBC,UAAnB,CAA+BC,MAA/B,CAAuCC,SAAvC,KAAwD,OAAxD,CACA,OAASC,kBAAT,KAAmC,gCAAnC,C,wFAEA,QAASC,gBAAT,MAA2E,IAAhDC,OAAgD,MAAhDA,MAAgD,CAAxCC,OAAwC,MAAxCA,OAAwC,CAA/BC,cAA+B,MAA/BA,cAA+B,CAAfC,WAAe,MAAfA,WAAe,CACzE,cAAwCT,QAAQ,CAAC,IAAD,CAAhD,wCAAOU,aAAP,eAAsBC,cAAtB,eACA,GAAMC,YAAW,CAAGX,UAAU,CAACG,kBAAD,CAA9B,CACA,GAAMS,UAAS,CAAGX,MAAM,CAAC,EAAD,CAAxB,CACA,eAAkDF,QAAQ,CAAC,EAAD,CAA1D,yCAAOc,iBAAP,eAA0BC,oBAA1B,eAEAZ,SAAS,CAAC,UAAM,CACdU,SAAS,CAACG,OAAV,CAAkBC,KAAlB,CAA0BL,WAAW,CAACM,MAAtC,CACAP,cAAc,CAAC,IAAD,CAAd,CACD,CAHQ,CAGN,CAACL,MAAD,CAASM,WAAT,CAHM,CAAT,CAKA,QAASO,yBAAT,CAAkCC,KAAlC,CAAyC,CACvCT,cAAc,CAACS,KAAK,CAACC,MAAN,CAAaC,QAAb,CAAsBC,KAAvB,CAAd,CACAR,oBAAoB,CAACF,SAAS,CAACG,OAAV,CAAkBF,iBAAnB,CAApB,CACD,CACD,QAASU,aAAT,CAAsBC,CAAtB,CAAyB,CACvBA,CAAC,CAACC,cAAF,GACAlB,cAAc,CAAC,CACbU,MAAM,CAAEL,SAAS,CAACG,OAAV,CAAkBC,KADb,CAAD,CAAd,CAGD,CACD,mBACE,MAAC,aAAD,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,wBAFR,CAGE,MAAM,CAAEX,MAHV,CAIE,OAAO,CAAEC,OAJX,CAKE,UAAU,CAAEE,WAAW,GAAK,KAAhB,CAAwB,MAAxB,CAAiC,WAL/C,CAME,QAAQ,CAAEe,YANZ,CAOE,WAAW,CAAEf,WAPf,wBASE,cACE,SAAS,uBACPC,aAAa,CAAG,EAAH,CAAQ,wBADd,CADX,CAIE,EAAE,CAAC,uBAJL,CAKE,WAAW,CAAC,uCALd,CAME,QAAQ,KANV,CAOE,IAAI,CAAC,KAPP,CAQE,IAAI,CAAC,QARP,CASE,QAAQ,CAAES,wBATZ,CAUE,GAAG,CAAEN,SAVP,EATF,cAqBE,aACE,SAAS,wBACPH,aAAa,CAAG,EAAH,CAAQ,sBADd,CADX,CAIE,EAAE,CAAC,6BAJL,UAMGI,iBANH,EArBF,GADF,CAgCD,CACD,cAAeT,gBAAf"},"metadata":{},"sourceType":"module"}