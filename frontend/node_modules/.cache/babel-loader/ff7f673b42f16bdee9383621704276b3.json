{"ast":null,"code":"import _slicedToArray from\"/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PopupWithForm from\"./PopupWithForm\";import{useState,useContext,useEffect}from\"react\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,buttonState=_ref.buttonState;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isNameValid=_useState6[0],setNameValid=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isAboutValid=_useState8[0],setAboutValid=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),validationMessage=_useState10[0],setValidationMessage=_useState10[1];var currentUser=useContext(CurrentUserContext);useEffect(function(){var _currentUser$name,_currentUser$about;setName((_currentUser$name=currentUser.name)!==null&&_currentUser$name!==void 0?_currentUser$name:\"\");setDescription((_currentUser$about=currentUser.about)!==null&&_currentUser$about!==void 0?_currentUser$about:\"\");},[currentUser]);function handleNameChange(e){setName(e.target.value);if(e.target.checkValidity()){setNameValid(true);}else{setNameValid(false);setValidationMessage(e.target.validationMessage);}}function handleDescriptionChange(e){setDescription(e.target.value);if(e.target.checkValidity()){setAboutValid(true);}else{setAboutValid(false);setValidationMessage(e.target.validationMessage);}}function handleSubmit(e){e.preventDefault();onUpdateUser({name:name,about:description});}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"profile\",title:\"Edit Profile\",isOpen:isOpen,onClose:onClose,buttonText:buttonState===false?\"Save\":\"Saving...\",onSubmit:handleSubmit,buttonState:buttonState,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__info \".concat(isNameValid?\"\":\"popup__info_type_error\"),id:\"popup-name\",required:true,minLength:\"2\",maxLength:\"40\",name:\"name\",value:name,onChange:handleNameChange}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error \".concat(isNameValid?\"\":\"popup__error_visible\"),id:\"popup-name-error\",children:validationMessage}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"popup__info \".concat(isAboutValid?\"\":\"popup__info_type_error\"),id:\"popup-title\",required:true,minLength:\"2\",maxLength:\"200\",name:\"about\",value:description,onChange:handleDescriptionChange}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__error \".concat(isAboutValid?\"\":\"popup__error_visible\"),id:\"popup-title-error\",children:validationMessage})]});}export default EditProfilePopup;","map":{"version":3,"names":["PopupWithForm","useState","useContext","useEffect","CurrentUserContext","EditProfilePopup","isOpen","onClose","onUpdateUser","buttonState","name","setName","description","setDescription","isNameValid","setNameValid","isAboutValid","setAboutValid","validationMessage","setValidationMessage","currentUser","about","handleNameChange","e","target","value","checkValidity","handleDescriptionChange","handleSubmit","preventDefault"],"sources":["/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/components/EditProfilePopup.js"],"sourcesContent":["import PopupWithForm from \"./PopupWithForm\";\nimport { useState, useContext, useEffect } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, buttonState }) {\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [isNameValid, setNameValid] = useState(true);\n  const [isAboutValid, setAboutValid] = useState(true);\n  const [validationMessage, setValidationMessage] = useState(\"\");\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n    setName(currentUser.name ?? \"\");\n    setDescription(currentUser.about ?? \"\");\n  }, [currentUser]);\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n    if (e.target.checkValidity()) {\n      setNameValid(true);\n    } else {\n      setNameValid(false);\n      setValidationMessage(e.target.validationMessage);\n    }\n  }\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value);\n    if (e.target.checkValidity()) {\n      setAboutValid(true);\n    } else {\n      setAboutValid(false);\n      setValidationMessage(e.target.validationMessage);\n    }\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"profile\"\n      title=\"Edit Profile\"\n      isOpen={isOpen}\n      onClose={onClose}\n      buttonText={buttonState === false ? \"Save\" : \"Saving...\"}\n      onSubmit={handleSubmit}\n      buttonState={buttonState}\n    >\n      <input\n        type=\"text\"\n        className={`popup__info ${isNameValid ? \"\" : \"popup__info_type_error\"}`}\n        id=\"popup-name\"\n        required\n        minLength=\"2\"\n        maxLength=\"40\"\n        name=\"name\"\n        value={name}\n        onChange={handleNameChange}\n      />\n      <span\n        className={`popup__error ${isNameValid ? \"\" : \"popup__error_visible\"}`}\n        id=\"popup-name-error\"\n      >\n        {validationMessage}\n      </span>\n      <input\n        type=\"text\"\n        className={`popup__info ${\n          isAboutValid ? \"\" : \"popup__info_type_error\"\n        }`}\n        id=\"popup-title\"\n        required\n        minLength=\"2\"\n        maxLength=\"200\"\n        name=\"about\"\n        value={description}\n        onChange={handleDescriptionChange}\n      />\n      <span\n        className={`popup__error ${isAboutValid ? \"\" : \"popup__error_visible\"}`}\n        id=\"popup-title-error\"\n      >\n        {validationMessage}\n      </span>\n    </PopupWithForm>\n  );\n}\nexport default EditProfilePopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}