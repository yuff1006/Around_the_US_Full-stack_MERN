{"ast":null,"code":"import _classCallCheck from\"/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Api,[{key:\"initialize\",value:function initialize(){return Promise.all([this.getUserInfo(),this.getInitialCards()]);}},{key:\"_handleFetchResponse\",value:function _handleFetchResponse(path){var methodUsed=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"GET\";var bodyContent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;return fetch(\"\".concat(this._baseUrl).concat(path),{method:methodUsed,headers:this._headers,body:bodyContent}).then(function(res){if(res.ok){return res.json();}else{return Promise.reject(\"Error: \".concat(res.status));}});}},{key:\"getInitialCards\",value:function getInitialCards(){return this._handleFetchResponse(\"/cards\");}},{key:\"getUserInfo\",value:function getUserInfo(){return this._handleFetchResponse(\"/users/me\");}},{key:\"editUserProfile\",value:function editUserProfile(inputValues){var bodyContent=JSON.stringify({name:inputValues.name,about:inputValues.about});return this._handleFetchResponse(\"/users/me\",\"PATCH\",bodyContent);}},{key:\"addNewCard\",value:function addNewCard(inputValues){var bodyContent=JSON.stringify({name:inputValues.name,link:inputValues.link});return this._handleFetchResponse(\"/cards\",\"POST\",bodyContent);}},{key:\"getCardLikeInfo\",value:function getCardLikeInfo(){return this._handleFetchResponse(\"/cards\");}},{key:\"deleteCard\",value:function deleteCard(cardId){return this._handleFetchResponse(\"/cards/\".concat(cardId),\"DELETE\");}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){if(isLiked){return this._handleFetchResponse(\"/cards/likes/\".concat(cardId),\"DELETE\");}else{return this._handleFetchResponse(\"/cards/likes/\".concat(cardId),\"PUT\");}}},{key:\"editProfilePic\",value:function editProfilePic(avatarLink){var bodyContent=JSON.stringify({avatar:avatarLink.avatar});return this._handleFetchResponse(\"/users/me/avatar\",\"PATCH\",bodyContent);}}]);return Api;}();export var api=new Api({baseUrl:\"https://around.nomoreparties.co/v1/group-12\",headers:{authorization:\"1384428a-b01c-46ae-afda-f222b9d7dc7d\",\"Content-Type\":\"application/json\"}});export default Api;","map":{"version":3,"names":["Api","baseUrl","headers","_baseUrl","_headers","Promise","all","getUserInfo","getInitialCards","path","methodUsed","bodyContent","undefined","fetch","method","body","then","res","ok","json","reject","status","_handleFetchResponse","inputValues","JSON","stringify","name","about","link","cardId","isLiked","avatarLink","avatar","api","authorization"],"sources":["/Users/yuffiehu/Documents/Coding/Practicum/react-around-auth/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n  initialize() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()]);\n  }\n  _handleFetchResponse(path, methodUsed = \"GET\", bodyContent = undefined) {\n    return fetch(`${this._baseUrl}${path}`, {\n      method: methodUsed,\n      headers: this._headers,\n      body: bodyContent,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      } else {\n        return Promise.reject(`Error: ${res.status}`);\n      }\n    });\n  }\n  getInitialCards() {\n    return this._handleFetchResponse(\"/cards\");\n  }\n  getUserInfo() {\n    return this._handleFetchResponse(\"/users/me\");\n  }\n  editUserProfile(inputValues) {\n    const bodyContent = JSON.stringify({\n      name: inputValues.name,\n      about: inputValues.about,\n    });\n    return this._handleFetchResponse(\"/users/me\", \"PATCH\", bodyContent);\n  }\n  addNewCard(inputValues) {\n    const bodyContent = JSON.stringify({\n      name: inputValues.name,\n      link: inputValues.link,\n    });\n    return this._handleFetchResponse(\"/cards\", \"POST\", bodyContent);\n  }\n  getCardLikeInfo() {\n    return this._handleFetchResponse(\"/cards\");\n  }\n  deleteCard(cardId) {\n    return this._handleFetchResponse(`/cards/${cardId}`, \"DELETE\");\n  }\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this._handleFetchResponse(`/cards/likes/${cardId}`, \"DELETE\");\n    } else {\n      return this._handleFetchResponse(`/cards/likes/${cardId}`, \"PUT\");\n    }\n  }\n  editProfilePic(avatarLink) {\n    const bodyContent = JSON.stringify({\n      avatar: avatarLink.avatar,\n    });\n    return this._handleFetchResponse(\"/users/me/avatar\", \"PATCH\", bodyContent);\n  }\n}\nexport const api = new Api({\n  baseUrl: \"https://around.nomoreparties.co/v1/group-12\",\n  headers: {\n    authorization: \"1384428a-b01c-46ae-afda-f222b9d7dc7d\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default Api;\n"],"mappings":"qSAAMA,I,yBACJ,kBAAkC,IAApBC,QAAoB,MAApBA,OAAoB,CAAXC,OAAW,MAAXA,OAAW,2BAChC,KAAKC,QAAL,CAAgBF,OAAhB,CACA,KAAKG,QAAL,CAAgBF,OAAhB,CACD,C,0CACD,qBAAa,CACX,MAAOG,QAAO,CAACC,GAAR,CAAY,CAAC,KAAKC,WAAL,EAAD,CAAqB,KAAKC,eAAL,EAArB,CAAZ,CAAP,CACD,C,oCACD,8BAAqBC,IAArB,CAAwE,IAA7CC,WAA6C,2DAAhC,KAAgC,IAAzBC,YAAyB,2DAAXC,SAAW,CACtE,MAAOC,MAAK,WAAI,KAAKV,QAAT,SAAoBM,IAApB,EAA4B,CACtCK,MAAM,CAAEJ,UAD8B,CAEtCR,OAAO,CAAE,KAAKE,QAFwB,CAGtCW,IAAI,CAAEJ,WAHgC,CAA5B,CAAL,CAIJK,IAJI,CAIC,SAACC,GAAD,CAAS,CACf,GAAIA,GAAG,CAACC,EAAR,CAAY,CACV,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CAFD,IAEO,CACL,MAAOd,QAAO,CAACe,MAAR,kBAAyBH,GAAG,CAACI,MAA7B,EAAP,CACD,CACF,CAVM,CAAP,CAWD,C,+BACD,0BAAkB,CAChB,MAAO,MAAKC,oBAAL,CAA0B,QAA1B,CAAP,CACD,C,2BACD,sBAAc,CACZ,MAAO,MAAKA,oBAAL,CAA0B,WAA1B,CAAP,CACD,C,+BACD,yBAAgBC,WAAhB,CAA6B,CAC3B,GAAMZ,YAAW,CAAGa,IAAI,CAACC,SAAL,CAAe,CACjCC,IAAI,CAAEH,WAAW,CAACG,IADe,CAEjCC,KAAK,CAAEJ,WAAW,CAACI,KAFc,CAAf,CAApB,CAIA,MAAO,MAAKL,oBAAL,CAA0B,WAA1B,CAAuC,OAAvC,CAAgDX,WAAhD,CAAP,CACD,C,0BACD,oBAAWY,WAAX,CAAwB,CACtB,GAAMZ,YAAW,CAAGa,IAAI,CAACC,SAAL,CAAe,CACjCC,IAAI,CAAEH,WAAW,CAACG,IADe,CAEjCE,IAAI,CAAEL,WAAW,CAACK,IAFe,CAAf,CAApB,CAIA,MAAO,MAAKN,oBAAL,CAA0B,QAA1B,CAAoC,MAApC,CAA4CX,WAA5C,CAAP,CACD,C,+BACD,0BAAkB,CAChB,MAAO,MAAKW,oBAAL,CAA0B,QAA1B,CAAP,CACD,C,0BACD,oBAAWO,MAAX,CAAmB,CACjB,MAAO,MAAKP,oBAAL,kBAAoCO,MAApC,EAA8C,QAA9C,CAAP,CACD,C,oCACD,8BAAqBA,MAArB,CAA6BC,OAA7B,CAAsC,CACpC,GAAIA,OAAJ,CAAa,CACX,MAAO,MAAKR,oBAAL,wBAA0CO,MAA1C,EAAoD,QAApD,CAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAKP,oBAAL,wBAA0CO,MAA1C,EAAoD,KAApD,CAAP,CACD,CACF,C,8BACD,wBAAeE,UAAf,CAA2B,CACzB,GAAMpB,YAAW,CAAGa,IAAI,CAACC,SAAL,CAAe,CACjCO,MAAM,CAAED,UAAU,CAACC,MADc,CAAf,CAApB,CAGA,MAAO,MAAKV,oBAAL,CAA0B,kBAA1B,CAA8C,OAA9C,CAAuDX,WAAvD,CAAP,CACD,C,mBAEH,MAAO,IAAMsB,IAAG,CAAG,GAAIjC,IAAJ,CAAQ,CACzBC,OAAO,CAAE,6CADgB,CAEzBC,OAAO,CAAE,CACPgC,aAAa,CAAE,sCADR,CAEP,eAAgB,kBAFT,CAFgB,CAAR,CAAZ,CAQP,cAAelC,IAAf"},"metadata":{},"sourceType":"module"}